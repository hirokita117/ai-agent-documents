# プロジェクト共通スタイルガイド

- すべてのレビューコメント・サマリは **日本語** で記述してください。  
- 重複指摘は避け、**同一論点は最も代表的な箇所**にのみコメントしてください。  

---

## 1. コーディング規約（言語横断）
- **命名**  
  - クラス/型: `PascalCase`  
  - 関数/変数: `camelCase`（例外: 定数は `UPPER_SNAKE_CASE`）  
  - ファイル名: プロジェクト慣習に合わせスネーク or ケバブで統一
- **フォーマット**  
  - インデント:  
  - 行長目安 100–120 列。長文化する場合は適切に改行  
  - 末尾スペース・不要な空行禁止
- **コメント**  
  - 公開 API は Javadoc/Doxygen/JSDoc 等の形式で要点を簡潔に  
  - 「なぜ」が不明瞭な実装には意図を補足
- **エラーハンドリング**  
  - 失敗時の戻り値/例外を明確化し、呼び出し側で扱える形に統一  
  - ログには機密情報を含めない
- **テスト**  
  - 新規/変更箇所にはユニットテストを用意  
  - 副作用・エッジケース（null/空/極端値/タイムアウト等）を網羅
- **依存関係**  
  - 未使用依存の削除、バージョンピン留めの妥当性確認  
  - ライセンス/互換性に留意

---

## 2. セキュリティ（優先度高）
- **入力検証**: すべての外部入力を検証・サニタイズ  
- **機密情報**: 秘密情報はコードに直書きしない（環境変数/シークレット管理）  
- **認可/認証**: 認証済みでも**権限制御**を必ず検査  
- **安全なデフォルト**: 失敗時はクローズドに倒す（deny by default）

---

## 3. パフォーマンス・可観測性
- **計算量/メモリ**: 不必要な N^2 ループや重複計算を避ける  
- **I/O**: バッチ化やストリーム処理、コネクションの再利用  
- **ログ/メトリクス**: 重要イベントに構造化ログとメトリクスを追加  
- **遅延の根拠**: 待機/リトライは根拠をコメントで明示

---

## 4. 可読性・保守性
- **関数の責務**: 単一責務、早期 return、ガード節  
- **重複排除**: コピペより抽象化/ユーティリティ化  
- **明確な命名**: 省略語や一文字名を避ける（i/j のループ変数等は可）

---

## 5. 設計指針
- **API 互換性**: 破壊的変更は段階的移行（deprecated → 置換）  
- **設定可能性**: マジックナンバーは設定/定数へ分離  
- **エラー分類**: リトライ可否で区別し、適切な層で処理

---

## 6. 言語・フレームワーク別ルール（必要に応じて拡張）
> プロジェクトの主要技術に合わせて、この節を追加してください。  
> 例：TypeScript/Java/Kotlin/Python/Go/Node.js/React/Spring/FastAPI など。

**例: TypeScript**
- `strict` を維持。`any` は最小限。  
- 例外は `Error` を継承し、原因（cause）を活用。  
- 非同期は `async/await` を原則、未処理の Promise を作らない。

**例: Python**
- 型ヒント必須（mypy/pyright で検証）。  
- ロガーは `logging` を使用し `print` 禁止。  
- コンテキストマネージャでリソースを確実に解放。
